"use strict";(globalThis["webpackChunkmomoco"]=globalThis["webpackChunkmomoco"]||[]).push([[248],{7372:(e,t,n)=>{n.d(t,{H3:()=>l,lY:()=>c});var o=n(6306),a=n.n(o),r=n(8734);class s{getCurrent(e="https://mo4koma.iranika.info/top/top.webp"){var t;return this.current.value=null!==(t=window.localStorage.getItem("header_img"))&&void 0!==t?t:e,this.current.value}getFullpath(e){return`${this.archives.value.archivesUrl}/${e}`}setCurrent(e){window.localStorage.setItem("header_img",e),this.current.value=e}initCurrent(){window.localStorage.removeItem("header_img"),this.getCurrent()}syncImageList(e="https://mo4koma.iranika.info/top/archives.json"){a().get(e).then((e=>{this.archives.value=e.data}))}static getInstance(){return this.instance||(this.instance=new s(s.getInstance)),this.instance}constructor(e){if(this.archives=(0,r.Kh)({value:{archivesUrl:"",files:[]}}),this.current=(0,r.Kh)({value:""}),e!=s.getInstance)throw s.instance?new Error("Already created instance of HeaderImgStore. You should use HeaderImgStore.getInstance()."):new Error("Constractor args valided illegal. You should use HeaderImgStore.getInstance()");console.info("create instance of HeaderImgStore"),this.syncImageList(),this.getCurrent()}}function l(){return s.getInstance()}class i{getBookmark(){var e;const t=null!==(e=window.localStorage.getItem("bookmarks"))&&void 0!==e?e:"";return""!=t?t.split(","):[]}addBookmark(e){this.bookmarks.value.includes(String(e))||this.bookmarks.value.push(String(e)),this.setBookmark()}removeBookmark(e){const t=this.bookmarks.value.indexOf(String(e));-1!=t&&this.bookmarks.value.splice(t,1),this.setBookmark()}setBookmark(){console.log("setBookmark",this.bookmarks.value),window.localStorage.setItem("bookmarks",this.bookmarks.value.join(","))}isIncludeBookmark(e){return this.bookmarks.value.includes(String(e))}clickBookmark(e){this.bookmarks.value.includes(String(e))?this.removeBookmark(e):this.addBookmark(e)}static getInstance(){return this.instance||(this.instance=new i(i.getInstance)),this.instance}constructor(e){if(this.bookmarks=(0,r.Kh)({value:this.getBookmark()}),e!=i.getInstance)throw i.instance?new Error("Already created instance of BookmarkStore. You should use BookmarkStore.getInstance()."):new Error("Constractor args valided illegal. You should use BookmarkStore.getInstance()");console.info("create instance of BookmarkStore")}}function c(){return i.getInstance()}},6248:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var o=n(1758);function a(e,t,n,a,r,s){const l=(0,o.g2)("ViewerContent"),i=(0,o.g2)("q-btn"),c=(0,o.g2)("q-page-sticky"),u=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(u,{padding:"",class:"bg"},{default:(0,o.k6)((()=>[(0,o.bF)(l,{page:e.page},null,8,["page"]),(0,o.bF)(c,{position:"bottom-right",offset:[18,18]},{default:(0,o.k6)((()=>[(0,o.bF)(i,{size:"small",round:"",onClick:t[0]||(t[0]=t=>e.scrollTop()),icon:"keyboard_arrow_up",color:"white",class:"text-black"})])),_:1})])),_:1})}const r=e=>((0,o.Qi)("data-v-55d296aa"),e=e(),(0,o.jt)(),e),s={class:"viewer-content"},l={key:0,centered:"",style:{"text-align":"center",padding:"10px"}},i=(0,o.eW)("▲前のお話▲"),c=["src"],u={style:{display:"flex","justify-content":"center"}},d=(0,o.eW)("しおり"),g=(0,o.eW)("Memo "),m=r((()=>(0,o.Lk)("div",{class:"text-h6"},"ひとくちメモ",-1))),h=["innerHTML"],k={centered:"",style:{"text-align":"center",padding:"10px"}},p=(0,o.eW)("▼続きを表示▼");function w(e,t,n,a,r,w){const b=(0,o.g2)("q-btn"),v=(0,o.g2)("TwitterShareButton"),f=(0,o.g2)("q-icon"),E=(0,o.g2)("q-space"),F=(0,o.g2)("q-card-section"),C=(0,o.g2)("q-card-actions"),B=(0,o.g2)("q-card"),I=(0,o.g2)("q-dialog"),S=(0,o.gN)("close-popup"),A=(0,o.gN)("scroll");return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",s,[Math.min.apply(null,e.show)>0?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(b,{size:"x-small",color:"white",class:"text-black",onClick:e.beforeContent,rounded:""},{default:(0,o.k6)((()=>[i])),_:1},8,["onClick"])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.show,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.pages[t].ImagesUrl,((n,a)=>((0,o.uX)(),(0,o.CE)("img",{key:a,src:e.pages[t].ImagesUrl[a].replace("/ja/","/ja/webp/").replace(".jpg",".webp"),class:"img4koma",scrollable:""},null,8,c)))),128)),(0,o.Lk)("div",u,[(0,o.bF)(v,{link:e.CreateShareLinkTwitter(t+1,e.pages[t].Title)},null,8,["link"]),(0,o.bF)(b,{color:e.bookmarkStore.isIncludeBookmark(t+1)?"grey":"green",class:"text-white",rounded:"",size:"xs",onClick:n=>e.bookmarkStore.clickBookmark(t+1)},{default:(0,o.k6)((()=>[(0,o.bF)(f,{name:"book"}),d])),_:2},1032,["color","onClick"]),e.db.memos[t]&&null!=e.db.memos[t]?((0,o.uX)(),(0,o.Wv)(b,{key:0,color:"orange",class:"text-white",rounded:"",size:"xs",onClick:n=>{e.memo=e.db.memos[t],e.memodal=!e.memodal}},{default:(0,o.k6)((()=>[(0,o.bF)(f,{name:"book"}),g])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])])))),128)),(0,o.bF)(I,{modelValue:e.memodal,"onUpdate:modelValue":t[1]||(t[1]=t=>e.memodal=t)},{default:(0,o.k6)((()=>[(0,o.bF)(B,null,{default:(0,o.k6)((()=>[(0,o.bF)(F,null,{default:(0,o.k6)((()=>[m,(0,o.bF)(E)])),_:1}),(0,o.bF)(F,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",{innerHTML:e.memo},null,8,h)])),_:1}),(0,o.bF)(C,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(b,{type:"text",label:"閉じる",flat:"",onClick:t[0]||(t[0]=t=>e.memodal=!e.memodal)},null,512),[[S]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Lk)("div",k,[e.pages.length-1>Math.max.apply(null,e.show)?((0,o.uX)(),(0,o.Wv)(b,{key:0,rounded:"",size:"x-small",onClick:t[2]||(t[2]=t=>e.addContent()),color:"white",class:"text-black"},{default:(0,o.k6)((()=>[p])),_:1})):(0,o.Q3)("",!0)])])),[[A,e.scrolled]])}var b=n(3500),v=n(8734);const f={style:{"text-align":"center"}},E=(0,o.eW)("シェア ");function F(e,t,n,a,r,s){const l=(0,o.g2)("q-icon"),i=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",f,[(0,o.bF)(i,{type:"a",rounded:"",size:"xs",color:"primary",class:"text-white",href:"https://twitter.com/intent/tweet?hashtags=%E9%81%93%E8%8D%89%E5%B1%8B&original_referer=https%3A%2F%2Fpublish.twitter.com%2F%3FbuttonText%3D%25E3%2581%2593%25E3%2581%2593%25E3%2581%2599%25E3%2581%258D%25EF%25BC%2581%25EF%25BC%2581%2523%25E3%2581%25BF%25E3%2581%25A1%25E3%2581%258F%25E3%2581%2595%25E3%2581%25B3%25E3%2582%2585%25E3%2581%2582%25E3%2583%25BC%26buttonType%3DTweetButton%26buttonUrl%3Dhttps%253A%252F%252Fmovue.iranika.info%252F%252310%26dnt%3D1%26lang%3Dja%26widget%3DButton&ref_src=twsrc%5Etfw&text=%E7%AC%AC1%E8%A9%B1%E3%80%8C%E9%83%BD%E4%BC%9A%E6%B4%BE%E3%80%8D&tw_p=tweetbutton&url=https%3A%2F%2Fmovue.iranika.info%2F%23%2F%3Fpage%3D1",target:"_blank"},{default:(0,o.k6)((()=>[(0,o.bF)(l,{name:e.mdiTwitter},null,8,["name"]),E])),_:1})])}var C=n(3437);const B=(0,o.pM)({props:{link:String},setup(){return{mdiTwitter:C.sgm}}});var I=n(2807),S=n(6384),A=n(492),y=n(8582),x=n.n(y);const _=(0,I.A)(B,[["render",F]]),D=_;x()(B,"components",{QBtn:S.A,QIcon:A.A});var T=n(6306),Q=n.n(T);const M="https://script.google.com/macros/s/AKfycbyqELM2mm3J58BLXIjxKxIYN64x6iF6I6ctJU_Vdui6gx331Pz5R5FpuL3s-aM8nsgn/exec";class q{static getInstance(){return this.instance||(this.instance=new q(q.getInstance)),this.instance}syncSpreadSheet(){Q().post(M).then((e=>{this.db.memos=e.data}))}constructor(e){if(this.db=(0,v.Kh)({memos:[]}),e!=q.getInstance)throw q.instance?new Error("Already created instance of AuthStore. You should use AuthStore.getInstance()."):new Error("Constractor args valided illegal. You should use AuthStore.getInstance()");console.info("create instance of MemoStore"),this.syncSpreadSheet()}}function L(){return q.getInstance()}var j=n(7372);const K=(0,o.pM)({components:{TwitterShareButton:D},props:{page:{type:String,default:"1"},lang:{type:String,default:"ja"}},setup(e){const t=(0,v.KR)(!1),n=(0,v.KR)(""),a=L().db,r=(0,j.lY)(),s=window.pageData;var l=(0,v.KR)(g(e.page));function i(e=1){s.length-1>Math.max.apply(null,l.value)?l.value.push(Math.max.apply(null,l.value)+e):console.log("viewerContent info: show.length is over pages.length")}function c(){Math.min.apply(null,l.value)>0?l.value.unshift(Math.min.apply(null,l.value)-1):console.log("viewerContent info: can not show page under 0")}function u(){const e=window.scrollY,t=window.innerHeight,n=document.documentElement.scrollHeight,o=t+e+2>=n;return o||n<t}const d=(0,b.A)((()=>{u()&&i()}),200);function g(e){const t=parseInt(e);if("latest"===e)return[s.length-1];if("ri"===e)return[80];if(0<t&&t<=s.length){const t=s.filter((t=>String(t.Index)==e))[0];return[s.indexOf(t)]}return[0]}function m(e,t){const n=encodeURI(`第${e}話「${t}」`);return`https://twitter.com/intent/tweet?hashtags=%E9%81%93%E8%8D%89%E5%B1%8B&original_referer=https%3A%2F%2Fpublish.twitter.com%2F%3FbuttonText%3D%25E3%2581%2593%25E3%2581%2593%25E3%2581%2599%25E3%2581%258D%25EF%25BC%2581%25EF%25BC%2581%2523%25E3%2581%25BF%25E3%2581%25A1%25E3%2581%258F%25E3%2581%2595%25E3%2581%25B3%25E3%2582%2585%25E3%2581%2582%25E3%2583%25BC%26buttonType%3DTweetButton%26buttonUrl%3Dhttps%253A%252F%252Fmovue.iranika.info%252F%252310%26dnt%3D1%26lang%3Dja%26widget%3DButton&ref_src=twsrc%5Etfw&text=${n}&tw_p=tweetbutton&url=https%3A%2F%2Fmovue.iranika.info%2F%23%2F%3Fpage%3D${e}`}return(0,o.wB)((()=>e.page),(e=>{l.value=g(e)}),{deep:!0}),{memodal:t,memo:n,db:a,pages:s,show:l,addContent:i,beforeContent:c,scrolled:d,CreateShareLinkTwitter:m,bookmarkStore:r}},methods:{}});var X=n(2156),Y=n(3316),H=n(4189),U=n(3676),W=n(2669),z=n(7235),V=n(8672);const $=(0,I.A)(K,[["render",w],["__scopeId","data-v-55d296aa"]]),R=$;x()(K,"components",{QBtn:S.A,QIcon:A.A,QDialog:X.A,QCard:Y.A,QCardSection:H.A,QSpace:U.A,QCardActions:W.A}),x()(K,"directives",{Scroll:z.A,ClosePopup:V.A});const P=(0,o.pM)({props:{page:String,lang:String},components:{ViewerContent:R},methods:{scrollTop(){scrollTo(0,0)}}});var N=n(7716),J=n(3718);const O=(0,I.A)(P,[["render",a],["__scopeId","data-v-5bc05f12"]]),G=O;x()(P,"components",{QPage:N.A,QPageSticky:J.A,QBtn:S.A})}}]);